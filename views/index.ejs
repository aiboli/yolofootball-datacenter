<!DOCTYPE html>
<html>

<head>
  <title>
    <%= title %>
  </title>
  <link rel='stylesheet' href='/stylesheets/style.css' />
  <link rel="stylesheet" type="text/css" href="/stylesheets/jsonview.bundle.css">
</head>

<body>
  <h1>
    <%= title %>
  </h1>
  <p>Welcome to <%= title %>
      <button id="getGames" onclick="getData()">get games data</button>
      <div id="jsondata" data-attr="<%= game %>">
      </div>
  </p>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<script type="text/javascript" src="/javascripts/jsonview.bundle.js"></script>
<script>
  var jsondata = document.getElementById('jsondata').getAttribute('data-attr');
  console.log(jsondata);
  const tree = JsonView.createTree(jsondata);
  JsonView.render(tree, document.querySelector('#jsondata'));
  JsonView.expandChildren(tree);
</script>
<script>
  function getData() {
    $.ajax({
      url: "/actions/getGames"
    }).done(function (res, error) {
      console.log(res);
      if (!error) {
        console.log(res);
      }
    });
  }
</script>

</html>